# Тестовое задание для Transparency International

## Введение
Этот репозиторий содержит исходный код выполненного тестового задания для Transparency International.
Ссылка на вакансию и тестовое задание: http://transparency.org.ru/deklaratcii/vnimanie-vakansiia-vedushchii-razrabotchik-proekta .
Ссылка на сайт на основе репозитория: http://declarator-patchranger.c9users.io:8080/office/589 . Для просмотра свяжитесь со мной - сервер сайта должен быть включен вручную, отключается при несипользовании.

![Фронтенд](https://raw.githubusercontent.com/PatchRanger/declarator-test-task/master/PatchRanger_declarator-test-task_frontend.png)
![Бэкенд](https://raw.githubusercontent.com/PatchRanger/declarator-test-task/master/PatchRanger_declarator-test-task_backend.png)

## Описание решения

### Общее
- В качестве внешнего вида были скопированы разметка и стили исходного сайта.
- Кроме того, в пределах необходимого (для облегчения понимания решения) были
также скопированы идентификаторы задействованных моделей: таким образом,
http://declarator.org/office/4/ и http://declarator-patchranger.c9users.io:8080/office/4
относятся к одной сущности.
- Код снабжён комментариями `@todo` для указания точек доработки.
- Комментарии в коде на английском - для избежания проблем с кодировками: чтобы
что бы ни случилось всегда можно было прочитать необходимый комментарий.

### Логика
- За основу решения была взята реализация конечного автомата (state machine),
установленная в виде сторонней библиотеки.
- Конечный автомат нашёл своё примение в решении для вычисления состояния кружочка,
отражающего степень заполненности деклараций ведомства: полностью заполненный,
наполовину заполненный, пустой кружочек и без метки вообще - логика соотнесения
состояний и кружочка взята напрямую из формулировки тестового задания.
- Конечный автомат применён в рекурсивном виде - для переиспользования общего кода
между аналогичной функциональностью поиска состояния зависимых сущностей для
пар моделей Office/Document и Document/DocumentFile.

### Представления
- Шаблоны реализуют наследование дабы избежать дублирования.
- Некоторые элементы (с потенциалом переиспользования) выделены в отдельные шаблоны
и подключаются с помощью директивы `include`.

### Данные
- Все необходимые данные для работы приожения заблаговременно заведены в базу данных
sqlite, она поставляется вместе с приложением и полностью готова к использованию.
- У моделей есть собственная админка: http://declarator-patchranger.c9users.io:8080/admin/office/ .
